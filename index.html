<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Snail Run üêö</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: #87ceeb;
  touch-action: none;
  font-family: sans-serif;
}

canvas {
  display: block;
  background: linear-gradient(#87ceeb, #e0f6ff);
}

/* ‡∏õ‡∏∏‡πà‡∏°‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
#jumpBtn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  font-size: 20px;
  background: orange;
  color: white;
  border: none;
  z-index: 10;
}
</style>
</head>

<body>
<canvas id="game"></canvas>
<button id="jumpBtn">JUMP</button>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (‡∏´‡∏≠‡∏¢) */
const player = {
  x: 80,
  y: canvas.height - 120,
  r: 25,
  vy: 0,
  jumpPower: -16,
  onGround: true
};

let gravity = 0.8;
let ground = canvas.height - 80;

/* ‡πÄ‡∏Å‡∏° */
let obstacles = [];
let speed = 5;
let score = 0;
let lives = 3;
let frame = 0;
let gameOver = false;

/* ‡∏ß‡∏≤‡∏î‡∏´‡∏≠‡∏¢‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô */
function drawSnail() {
  ctx.fillStyle = "#ffcc99";
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.r, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = "#cc9966";
  ctx.beginPath();
  ctx.arc(player.x - 5, player.y, 12, 0, Math.PI * 2);
  ctx.fill();
}

/* ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î */
function jump() {
  if (player.onGround && !gameOver) {
    player.vy = player.jumpPower;
    player.onGround = false;
  }
}

/* ‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á */
function spawnObstacle() {
  obstacles.push({
    x: canvas.width,
    y: ground,
    w: 40,
    h: 40
  });
}

/* ‡∏ß‡∏≤‡∏î */
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  /* ‡∏û‡∏∑‡πâ‡∏ô */
  ctx.fillStyle = "#4caf50";
  ctx.fillRect(0, ground, canvas.width, 80);

  drawSnail();

  /* ‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á */
  ctx.fillStyle = "red";
  obstacles.forEach(o => {
    ctx.fillRect(o.x, o.y - o.h, o.w, o.h);
  });

  /* HUD */
  ctx.fillStyle = "black";
  ctx.font = "20px sans-serif";
  ctx.fillText("‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: " + score, 20, 30);
  ctx.fillText("‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï: ‚ù§Ô∏è x " + lives, 20, 60);

  if (gameOver) {
    ctx.font = "40px sans-serif";
    ctx.fillText("GAME OVER", canvas.width/2 - 120, canvas.height/2);
  }
}

/* ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï */
function update() {
  if (gameOver) return;

  frame++;
  score++;

  /* ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ */
  if (frame % 300 === 0) speed += 1;

  /* ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô */
  player.vy += gravity;
  player.y += player.vy;

  if (player.y >= ground - player.r) {
    player.y = ground - player.r;
    player.vy = 0;
    player.onGround = true;
  }

  /* ‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á */
  if (frame % 120 === 0) spawnObstacle();

  obstacles.forEach(o => o.x -= speed);

  /* ‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏ô */
  obstacles = obstacles.filter(o => {
    if (
      player.x + player.r > o.x &&
      player.x - player.r < o.x + o.w &&
      player.y + player.r > o.y - o.h
    ) {
      lives--;
      if (lives <= 0) gameOver = true;
      return false;
    }
    return o.x + o.w > 0;
  });
}

/* ‡∏•‡∏π‡∏õ‡πÄ‡∏Å‡∏° */
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();

/* ‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î */
document.addEventListener("keydown", e => {
  if (e.code === "Space") jump();
});

/* ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
document.getElementById("jumpBtn").addEventListener("touchstart", jump);
</script>
</body>
</html>
